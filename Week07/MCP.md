
### https://www.youtube.com/watch?v=Rn5HMaWunx4 
- https://github.com/dabidstudio/python_mcp_agent

# MCP μ•„ν‚¤ν…μ² κ°μ”

## π—οΈ κΈ°λ³Έ κµ¬μ΅°

- **ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ μ•„ν‚¤ν…μ² κΈ°λ°**
- LLM μ• ν”λ¦¬μΌ€μ΄μ…κ³Ό **μ™Έλ¶€ λ°μ΄ν„° μ†μ¤/λ„κµ¬ κ°„ ν†µν•©**μ„ μ„ν• ν”„λ μ„μ›ν¬

---

## π§© μ£Όμ” κµ¬μ„± μ”μ†

| κµ¬μ„± μ”μ†            | μ„¤λ… |
|---------------------|------|
| **νΈμ¤νΈ μ• ν”λ¦¬μΌ€μ΄μ… (MCP νΈμ¤νΈ)** | LLM κΈ°λ° μ•± (μ: μ±„ν… ν΄λΌμ΄μ–ΈνΈ, IDE λ“±) |
| **ν΄λΌμ΄μ–ΈνΈ (MCP ν΄λΌμ΄μ–ΈνΈ)**       | νΈμ¤νΈ μ•± λ‚΄μ—μ„ MCP μ„λ²„μ™€ **1:1 μ—°κ²° μ μ§€** |
| **μ„λ²„ (MCP μ„λ²„)**                | ν‘μ¤€ν™”λ MCP ν”„λ΅ν† μ½μ„ ν†µν•΄ κΈ°λ¥ μ κ³µ<br>λ΅μ»¬ λλ” μ›κ²© λ°μ΄ν„° μ†μ¤ μ ‘κ·Ό μ§€μ› |

---

## π”§ ν•µμ‹¬ μ»΄ν¬λ„νΈ

### 1. **ν”„λ΅ν† μ½ λ μ΄μ–΄**
- λ©”μ‹μ§€ ν”„λ μ΄λ°
- μ”μ²­/μ‘λ‹µ μ—°κ²° λ° ν†µμ‹  ν¨ν„΄ κ΄€λ¦¬

### 2. **μ „μ†΅ λ μ΄μ–΄**
- **STDIO μ „μ†΅**: λ΅μ»¬ ν”„λ΅μ„Έμ¤ κ°„ ν†µμ‹ 
- **HTTP with SSE μ „μ†΅**: μ„λ²„-ν΄λΌμ΄μ–ΈνΈ λ° ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ κ°„ ν†µμ‹ 

---

## π’¬ λ©”μ‹μ§€ μ ν•

| λ©”μ‹μ§€ μ ν•   | μ„¤λ… |
|--------------|------|
| **μ”μ²­ (Requests)**    | μ‘λ‹µμ„ κΈ°λ€ν•λ” μ‘μ—… μ‹μ‘ |
| **κ²°κ³Ό (Results)**     | μ”μ²­μ— λ€ν• **μ„±κ³µ μ‘λ‹µ** |
| **μ¤λ¥ (Errors)**      | μ”μ²­ μ‹¤ν¨λ¥Ό λ‚νƒ€λƒ„ |
| **μ•λ¦Ό (Notifications)** | μ‘λ‹µμ„ κΈ°λ€ν•μ§€ μ•λ” **λ‹¨λ°©ν–¥ λ©”μ‹μ§€** |

---

## π”„ μ—°κ²° μƒλ…μ£ΌκΈ°

1. **μ΄κΈ°ν™”**
   - ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„: ν”„λ΅ν† μ½ λ²„μ „ λ° κΈ°λ¥ μ „μ†΅
   - μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ: μ‘λ‹µ
   - ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„: ν™•μΈ

2. **λ©”μ‹μ§€ κµν™**
   - μ”μ²­-μ‘λ‹µ μƒνΈμ‘μ©
   - ν•„μ”μ— λ”°λΌ μ•λ¦Ό μ „μ†΅

3. **μΆ…λ£**
   - μ •μƒ μΆ…λ£
   - μ—°κ²° ν•΄μ 
   - μ¤λ¥λ΅ μΈν• μΆ…λ£

---

## π― μ„¤κ³„ λ©ν‘

- **λ¨λ“ν™” λ° ν™•μ¥μ„± ν™•λ³΄**
- LLM μ• ν”λ¦¬μΌ€μ΄μ…κ³Ό λ‹¤μ–‘ν• λ„κµ¬/λ°μ΄ν„° μ†μ¤ κ°„ **μ μ—°ν• ν†µν•© μ§€μ›**


###  μ‹¤μµνμΌ μ‘λ™ λ§¤μ»¤λ‹μ¦

| λ‹¨κ³„ | μ„¤λ… | κ΄€λ ¨ Python νμΌ | μ£Όμ” μ—­ν•  |
|------|------|------------------|------------|
| 1 | μ‚¬μ©μ μ§λ¬Έ μ…λ ¥ | `4_mcp_client.py` | Streamlit UIμ—μ„ μ‚¬μ©μκ°€ μ§λ¬Έ μ…λ ¥ (`st.chat_input`) |
| 2 | μ§λ¬Έ λ©”μ‹μ§€ μ„Έμ…μ— μ €μ¥ | `4_mcp_client.py` | `st.session_state.chat_history`μ— μ‚¬μ©μ λ©”μ‹μ§€ μ¶”κ°€ |
| 3 | MCP μ„λ²„ μ—°κ²° μ„¤μ • | `4_mcp_client.py`<br>`mcp.json` | `setup_mcp_servers()` ν•¨μκ°€ `mcp.json`μ λ…λ Ήμ–΄λ΅ MCP μ„λ²„ μ‹¤ν–‰ λ° μ—°κ²° |
| 4 | LLM κΈ°λ° Agent μ΄κΈ°ν™” | `4_mcp_client.py` | `Agent(...)` κ°μ²΄μ— `mcp_servers` ν¬ν•¨ν•μ—¬ μƒμ„±λ¨ |
| 5 | μ‚¬μ©μ λ©”μ‹μ§€λ¥Ό LLMμ— μ „λ‹¬ | `4_mcp_client.py` | `Runner.run_streamed()` νΈμ¶λ΅ λ€ν™” νμ¤ν† λ¦¬λ¥Ό GPT-4o-miniμ— μ…λ ¥ |
| 6 | LLMμ΄ MCP Tool νΈμ¶ ν•„μ” νλ‹¨ | `4_mcp_client.py` λ‚΄λ¶€<br>(μλ™ μ²λ¦¬) | λ©”μ‹μ§€ μ¤‘ μΌλ¶€λ¥Ό μ²λ¦¬ν•κΈ° μ„ν•΄ MCP μ„λ²„μ ν΄ ν•¨μ νΈμ¶ κ²°μ • |
| 7 | MCP μ„λ²„λ΅ Tool μ”μ²­ μ „μ†΅ | `4_mcp_client.py`<br>β†” `2_mcp_server.py` | MCPServerStdio ν†µν•΄ `get_youtube_transcript`, `search_youtube_videos` λ“± νΈμ¶ |
| 8 | MCP μ„λ²„μ—μ„ λ„κµ¬ μ‹¤ν–‰ | `2_mcp_server.py` | λ“±λ΅λ `@mcp.tool()` ν•¨μκ°€ νΈμ¶λμ–΄ μ νλΈ API μ²λ¦¬ |
| 9 | Tool μ‹¤ν–‰ κ²°κ³Ό LLMμ— μ „λ‹¬ | `4_mcp_client.py` λ‚΄λ¶€ μ²λ¦¬ | Tool μ¶λ ¥ κ²°κ³Όκ°€ λ‹¤μ‹ GPT λ¨λΈλ΅ λμ•„κ°€ μ‘λ‹µ μƒμ„± μ¬λ£λ΅ μ‚¬μ©λ¨ |
| 10 | μµμΆ… μ‘λ‹µ μƒμ„± | `4_mcp_client.py` | GPT-4o-miniκ°€ Tool κ²°κ³Όλ¥Ό λ°”νƒ•μΌλ΅ μμ—°μ–΄ μ‘λ‹µ μƒμ„± |
| 11 | μ‹¤μ‹κ°„ μ¤νΈλ¦¬λ° μ¶λ ¥ | `4_mcp_client.py` | `async for event in result.stream_events()` ν†µν•΄ μ‹¤μ‹κ°„μΌλ΅ μ‘λ‹µ ν† ν° μ¶λ ¥ |
| 12 | μ‚¬μ©μ ν™”λ©΄μ— μ¶λ ¥ | `4_mcp_client.py` + Streamlit | `st.chat_message()`λ΅ LLM μ‘λ‹µμ΄ μ‚¬μ©μμ—κ² μ¶λ ¥λ¨ |
